{"version":3,"sources":["+custom.js","+furniture.js"],"names":["$","document","ready","drawPassGraphic","data","console","log","margin","top","right","bottom","left","width","potentialHeight","height","arcMod","x","d3","scaleLinear","range","y","domain","xAxis","axisBottom","scale","tickValues","tickFormat","d","i","svg","select","append","attr","line","x1","spot","toString","x2","yards","y1","offset","offsetX1","offsetX2","passes","selectAll","enter","plays","touchdown","base","call","text","displayTooltip","event","id","tooltip","ttWidth","outerWidth","season","opp","week","quarter","time","detail","w","window","xPos","clientX","yPos","clientY","drawAttempts","color","interpolate","interpolateHcl","rgb","attContainer","seasons","season_year","interception","result","on","sortedData","getJSON","forEach","value","tempYear","_","orderBy","push","closeList","removeClass","Date","year","getFullYear","$hedButton","click","e","hasClass","this","addClass","siblings","stopPropagation","cookie","indexOf"],"mappings":"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","file":"scripts-bundle.js","sourcesContent":["'use strict';\n\n/* global $:true document:true d3:true mapboxgl: true window: true _:true event: true */\n\n$(document).ready(function () {\n  // custom scripting goes here\n\n  var sortedData = [];\n\n  /* ///////////////////////////////////////////////////////////////////////////\n  // DRAWING THE ARC GRAPHIC\n  /////////////////////////////////////////////////////////////////////////// */\n  function drawPassGraphic(data) {\n    console.log(data);\n\n    var margin = {\n      top: 0,\n      right: 50,\n      bottom: 40,\n      left: 50\n    };\n\n    // getting the width and potential height\n    var width = $('#graphic').width();\n    var potentialHeight = width / 3;\n\n    // using the lesser of potentialHeight and 400 as the height of the graphic\n    var height = potentialHeight > 400 ? 400 : potentialHeight;\n\n    // the arc modifier is a factor of the height of the graphic\n    var arcMod = height / 100 * 1.5;\n\n    // setting our x and y scales\n    var x = d3.scaleLinear().range([0, width - margin.left - margin.right]);\n    var y = d3.scaleLinear().range([height, 0]);\n\n    x.domain([0, 100]);\n    y.domain([height, 0]);\n\n    // setting our x-axis and ticks. Ticks are in the format of football field\n    // yards lines, so any tick over 50 is convered back to a 0-50 range\n    var xAxis = d3.axisBottom().scale(x).tickValues([0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100]).tickFormat(function (d, i) {\n      if (i < 6) {\n        return d;\n      }\n      return d - (i - 5) * 20;\n    });\n\n    // creating our svg canvas\n    var svg = d3.select('#graphic').data(data).append('svg').attr('width', width).attr('height', height + margin.top + margin.bottom);\n\n    // creating our curved line accesssor function. lines starting spots are based\n    // on the starting spot of the play on a football field. ending spots are based\n    // on the length of the play. arcs, and curve points are based on length of play\n    // and height of graphic\n    var line = function line(d) {\n      var x1 = x(d.spot).toString();\n      var x2 = x(d.spot + +d.yards).toString();\n      var y1 = y(height).toString();\n      var offset = y(height - +d.yards / 1.25 * arcMod).toString();\n      var offsetX1 = x(d.spot + +d.yards / 4).toString();\n      var offsetX2 = x(d.spot + +d.yards - +d.yards / 4).toString();\n\n      return 'M ' + x1 + ',' + y1 + ' C ' + offsetX1 + ', ' + offset + ' ' + offsetX2 + ', ' + offset + ' ' + x2 + ', ' + y1;\n    };\n\n    // creating the group to hold our passing marks\n    var passes = svg.selectAll('g').data(data).enter().append('g').attr('transform', 'translate( ' + margin.left + ', ' + margin.top + ' )');\n\n    // appending the passing arcs\n    passes.selectAll('path').data(function (d) {\n      return d.plays;\n    }).enter().append('path').attr('class', function (d) {\n      if (d.touchdown === true) {\n        return 'pass touchdown';\n      }\n      return 'pass';\n    }).attr('d', function (d) {\n      return line(d);\n    });\n\n    // appending the base group that will hold our baseline\n    var base = svg.append('g');\n\n    base.append('line').attr('x1', 0).attr('x2', width).attr('y1', height).attr('y2', height);\n\n    // appending axis and labels\n    svg.append('g').attr('class', 'x axis').attr('transform', 'translate(' + margin.left + ', ' + height + ')').call(xAxis);\n\n    svg.append('text').attr('class', 'axis-label').attr('text-anchor', 'middle').attr('x', x(50) + margin.left).attr('y', height + 35).attr('class', 'axis-label').text('Cowboys moving left to right');\n  }\n\n  function displayTooltip(event, data, id) {\n    var tooltip = d3.select(id);\n    var ttWidth = $(id).outerWidth();\n    tooltip.select('.tt-season').text(data.season);\n    tooltip.select('.tt-opponent').text(data.opp);\n    tooltip.select('.tt-week').text(data.week);\n    tooltip.select('.tt-quarter').text(data.quarter);\n    tooltip.select('.tt-time').text(data.time);\n    tooltip.select('.tt-detail').text(data.detail);\n\n    var w = $(window).width();\n    var xPos = 0;\n    if (event.clientX > w / 2.1) {\n      xPos = event.clientX - (ttWidth + 15);\n      tooltip.attr('class', 'tooltip left');\n    } else {\n      xPos = event.clientX + 20;\n      tooltip.attr('class', 'tooltip right');\n    }\n\n    // const xPos = event.clientX > (w / 2) ? event.clientX - 160 : event.clientX + 20;\n    var yPos = event.clientY - 10;\n\n    tooltip.attr('style', 'left: ' + xPos + 'px; top: ' + yPos + 'px');\n  }\n\n  /* ///////////////////////////////////////////////////////////////////////////\n  // DRAWING THE ATTEMPTS GRAPHIC\n  /////////////////////////////////////////////////////////////////////////// */\n\n  function drawAttempts(data) {\n    console.log(data);\n\n    var color = d3.scaleLinear().domain([0, 100]).interpolate(d3.interpolateHcl).range([d3.rgb('#e9f4fd'), d3.rgb('#0b3f65')]);\n\n    var attContainer = d3.select('#att-graphic').data(data);\n\n    var seasons = attContainer.selectAll('div').data(data).enter().append('div').attr('class', function (d) {\n      return 'season season-' + d.season_year + ' clearfix';\n    });\n\n    seasons.append('span').attr('class', 'season-label').text(function (d) {\n      console.log(d);\n      return d.season_year;\n    });\n\n    seasons.selectAll('attempt').data(function (d) {\n      return d.plays;\n    }).enter().append('span').attr('style', function (d) {\n      return 'background-color: ' + color(+d.yards);\n    }).attr('class', function (d) {\n      if (d.interception) {\n        return 'attempt interception';\n      } else if (d.touchdown) {\n        return 'attempt touchdown';\n      } else if (d.result === 'incomplete') {\n        return 'attempt incomplete';\n      }\n      return 'attempt';\n    }).text(function (d) {\n      if (d.interception) {\n        return 'I';\n      }return '';\n    }).on('mousemove', function (d) {\n      return displayTooltip(event, d, '#att-tooltip');\n    }).on('mouseout', function () {\n      return d3.select('#att-tooltip').attr('class', 'tooltip noshow');\n    });\n  }\n\n  $.getJSON('../js/data.json', function (data) {\n    // sorts data by week, quarter and time\n    data.forEach(function (value) {\n      var tempYear = value;\n      tempYear.plays = _.orderBy(value.plays, ['week', 'quarter', 'sort_time'], ['asc', 'asc', 'desc']);\n      sortedData.push(tempYear);\n    });\n\n    // passes off sorted data to arc drawing function\n    drawPassGraphic(sortedData);\n    drawAttempts(sortedData);\n  });\n});","\"use strict\";\n\n$(document).ready(function () {\n    // injecting current year into footer\n    // DO NOT DELETE\n\n    var d = new Date();\n    var year = d.getFullYear();\n\n    $('.copyright').text(year);\n\n    // some code blocks require javascript to function, like slideshows, synopsis blocks, etc\n    // you can find that code here: https://github.com/DallasMorningNews/generator-dmninteractives/wiki/Cookbook\n\n    // closes any header dropdown menus and resets the up/down chevron\n    function closeList() {\n        $(\".open-list\").removeClass(\"open-list\");\n        $(\".open-button\").removeClass(\"open-button\");\n    }\n\n    var $hedButton = $(\".header-group button\");\n\n    // clicking any of the header dropdown menu buttons (i.e. \"topics\", or \"my account\")\n    $hedButton.click(function (e) {\n\n        // if the button that is clicked is already open, close the menu, else, close the\n        // menu then open the selected menu\n        if ($hedButton.hasClass(\"open-button\") === true && $(this).hasClass(\"open-button\") === true) {\n            closeList();\n        } else {\n            closeList();\n            $(this).addClass(\"open-button\");\n            $(this).siblings(\"ul\").addClass(\"open-list\");\n        }\n        e.stopPropagation();\n    });\n\n    // clicking anywhere in the body should close any open menus\n    $(\"body\").click(function () {\n        closeList();\n    });\n\n    // if the user is signed in, add the subscribed class to the body, which will reveal\n    // the proper my account menu items.\n    if (document.cookie.indexOf(\"DMN-P\") >= 0) {\n        $(\"body\").addClass(\"subscribed\");\n    } else {\n        $(\"body\").removeClass(\"subscribed\");\n    }\n});"]}