"use strict";$(document).ready(function(){function t(t,e,s){var a=d3.select(s),o=$(s).outerWidth();a.select(".tt-season").text(e.season),a.select(".tt-opponent").text(e.opp),a.select(".tt-week").text(e.week),a.select(".tt-quarter").text(e.quarter),a.select(".tt-time").text(e.time),a.select(".tt-detail").text(e.detail);var n=$(window).width(),r=0;t.clientX>n/2.1?(r=t.clientX-(o-10),a.attr("class","tooltip")):(r=t.clientX-10,a.attr("class","tooltip"));var l=t.clientY+15;a.attr("style","left: "+r+"px; top: "+l+"px")}function e(t,e){var s={top:0,right:10,bottom:40,left:10},a=$(e).width(),o=a/2,n=o>400?400:o,r=n/100*1.5;"#graphic"!==e&&(n=198,r=n/100*1.7,s.bottom=35);var l=d3.scaleLinear().range([0,a-s.left-s.right]),i=d3.scaleLinear().range([n,0]);l.domain([0,100]),i.domain([n,0]);var c=d3.axisBottom().scale(l).tickValues([0,10,20,30,40,50,60,70,80,90,100]).tickFormat(function(t,e){return e<6?t:t-20*(e-5)}),d=d3.select(e).data(t).append("svg").attr("width",a).attr("height",n+s.top+s.bottom),p=function(t){var e=l(t.spot).toString(),s=l(t.spot+ +t.yards).toString(),a=i(n).toString(),o=i(n-+t.yards/1.25*r).toString(),c=l(t.spot+ +t.yards/4).toString(),d=l(t.spot+ +t.yards-+t.yards/4).toString();return 0===+t.yards&&"complete"===t.result&&(o=i(n-25)),"M "+e+","+a+" C "+c+", "+o+" "+d+", "+o+" "+s+", "+a},u=d.selectAll("g").data(t).enter().append("g").attr("transform","translate( "+s.left+", "+s.top+" )");u.selectAll("path").data(function(t){return t.plays}).enter().append("path").attr("class",function(t){return t.touchdown===!0?"pass touchdown yr-"+t.season+" "+t.opp:"pass yr-"+t.season+" "+t.opp}).attr("d",function(t){return p(t)});var f=d.append("g");f.append("line").attr("x1",0).attr("x2",a).attr("y1",n).attr("y2",n),d.append("g").attr("class","x axis").attr("transform","translate("+s.left+", "+n+")").call(c),d.append("text").attr("class","axis-label").attr("text-anchor","middle").attr("x",l(50)+s.left).attr("y",n+35).attr("class","axis-label").text("Cowboys moving left to right")}function s(e){var s=d3.scaleLinear().domain([-10,100]).interpolate(d3.interpolateHcl).range([d3.rgb("#deebf7"),d3.rgb("#08306b")]),a=d3.select("#att-graphic").data(e),o=a.selectAll("div").data(e).enter().append("div").attr("class",function(t){return"season season-"+t.season_year+" clearfix"});o.append("span").attr("class","season-label").html(function(t,e){return"<strong>"+t.season_year+":</strong> "+u[e].comps+"-"+u[e].atts+", "+u[e].yds+" yards, "+u[e].tds+" TDs"}),o.selectAll("attempt").data(function(t){return t.plays}).enter().append("span").attr("style",function(t){return"background-color: "+s(+t.yards)}).attr("class",function(t){return t.interception?"attempt interception":t.touchdown?"attempt touchdown":"incomplete"===t.result?"attempt incomplete":"attempt"}).on("mousemove",function(e){return t(event,e,"#att-tooltip")}).on("mouseout",function(){return d3.select("#att-tooltip").attr("class","tooltip no-show")});var n=0,r=0;$.each($(".attempt"),function(){$(this).hasClass("interception")===!1&&$(this).hasClass("incomplete")===!1?n+=1:(n>=r&&(r=n,console.log(r,$(this).parent().attr("class"))),n=0)}),$.each($(".season"),function(){var t=0;$.each($(this).children(".attempt"),function(){$(this).hasClass("interception")===!1&&$(this).hasClass("incomplete")===!1&&(t+=1)}),console.log(t,$(this).children(".attempt").length)})}function a(){$("#graphic .pass").addClass("no-show"),"all"!==f&&"all"!==h?$("#graphic .yr-"+f+"."+h).removeClass("no-show"):"all"===f&&"all"!==h?$("#graphic ."+h).removeClass("no-show"):"all"===h&&"all"!==f?$("#graphic .yr-"+f).removeClass("no-show"):$("#graphic .pass").removeClass("no-show")}function o(t){console.log(t);var e=_.find(p,["receiver",t]);console.log(e);var s=parseFloat((e.catches/l*100).toFixed(1)),a=parseFloat((e.yards/c*100).toFixed(1)),o=parseFloat((e.touchdowns/i*100).toFixed(1));s=s>0?s:0,a=a>0?a:0,o=o>0?o:0,console.log(s,a,o),$("#player-recs").css("width",s+"%"),$("#player-yds").css("width",a+"%"),$("#player-tds").css("width",o+"%"),$("#rec-per").text(s+"%").css("left",s+"%"),$("#yds-per").text(a+"%").css("left",a+"%"),$("#tds-per").text(o+"%").css("left",o+"%");var n=e.yards.toFixed(0);if(n.length>=4){var r=n.slice(0,n.length-3),d=n.slice(-3);n=r+","+d}$("#rec-data").html(e.catches),$("#yds-data").html(n),$("#tds-data").html(e.touchdowns);var u=e.receiver.split(" ").join("");u="_"+u+".jpg",$("#receiver-head-block img").attr("src","images/"+u).attr("alt",e.receiver),$("#receiver-pos").text(e.pos+", "+e.years)}function n(t){d=[],$("#receiver-arcs").html("");for(var s=function(e){var s={season_year:r[e].season_year,plays:[]};$.each(r[e].plays,function(e,a){a.target===t&&s.plays.push(a)}),d.push(s)},a=0;a<r.length;a+=1)s(a);$("#receiver-name").text(t),e(d,"#receiver-arcs"),o(t)}Modernizr.touchevents&&$("body").addClass("touch");var r=[],l=2943,i=256,c=35499,d=[],p=void 0,u=[{season:"2006",comps:237,atts:366,yds:"3,104",tds:20},{season:"2007",comps:353,atts:556,yds:"4,412",tds:37},{season:"2008",comps:276,atts:450,yds:"3,448",tds:26},{season:"2009",comps:392,atts:620,yds:"4,925",tds:28},{season:"2010",comps:148,atts:213,yds:"1,605",tds:11},{season:"2011",comps:346,atts:522,yds:"4,184",tds:31},{season:"2012",comps:425,atts:648,yds:"4,903",tds:28},{season:"2013",comps:342,atts:535,yds:"3,828",tds:31},{season:"2014",comps:338,atts:485,yds:"4,189",tds:38},{season:"2015",comps:83,atts:121,yds:"884",tds:5},{season:"2016",comps:3,atts:4,yds:"29",tds:1}],f="all",h="all";$("#comp-season").change(function(){f=$("#comp-season option:selected").attr("value"),a()}),$("#comp-opp").change(function(){h=$("#comp-opp option:selected").attr("value"),a()}),$("#catchers").change(function(){var t=$(this).val();n(t)}),$(".tooltip button").click(function(){return $(".tooltip").addClass("no-show")}),$.getJSON("../js/data2.json",function(t){t.forEach(function(t){var e=t;e.plays=_.orderBy(t.plays,["week","quarter","sort_time"],["asc","asc","desc"]),r.push(e)}),e(r,"#graphic"),s(r),$.getJSON("../js/rec-data.json",function(t){p=t,n("Jason Witten")})})}),$(document).ready(function(){function t(){$(".open-list").removeClass("open-list"),$(".open-button").removeClass("open-button")}var e=new Date,s=e.getFullYear();$(".copyright").text(s);var a=$(".header-group button");a.click(function(e){a.hasClass("open-button")===!0&&$(this).hasClass("open-button")===!0?t():(t(),$(this).addClass("open-button"),$(this).siblings("ul").addClass("open-list")),e.stopPropagation()}),$("body").click(function(){t()}),document.cookie.indexOf("DMN-P")>=0?$("body").addClass("subscribed"):$("body").removeClass("subscribed")});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e,s){function a(t,e){return("undefined"==typeof t?"undefined":_typeof(t))===e}function o(){var t,e,s,o,n,r,l;for(var i in d)if(d.hasOwnProperty(i)){if(t=[],e=d[i],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(s=0;s<e.options.aliases.length;s++)t.push(e.options.aliases[s].toLowerCase());for(o=a(e.fn,"function")?e.fn():e.fn,n=0;n<t.length;n++)r=t[n],l=r.split("."),1===l.length?u[l[0]]=o:(!u[l[0]]||u[l[0]]instanceof Boolean||(u[l[0]]=new Boolean(u[l[0]])),u[l[0]][l[1]]=o),c.push((o?"":"no-")+l.join("-"))}}function n(t){var e=f.className,s=u._config.classPrefix||"";if(h&&(e=e.baseVal),u._config.enableJSClass){var a=new RegExp("(^|\\s)"+s+"no-js(\\s|$)");e=e.replace(a,"$1"+s+"js$2")}u._config.enableClasses&&(e+=" "+s+t.join(" "+s),h?f.className.baseVal=e:f.className=e)}function r(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):h?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function l(){var t=e.body;return t||(t=r(h?"svg":"body"),t.fake=!0),t}function i(t,s,a,o){var n,i,c,d,p="modernizr",u=r("div"),h=l();if(parseInt(a,10))for(;a--;)c=r("div"),c.id=o?o[a]:p+(a+1),u.appendChild(c);return n=r("style"),n.type="text/css",n.id="s"+p,(h.fake?h:u).appendChild(n),h.appendChild(u),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.createTextNode(t)),u.id=p,h.fake&&(h.style.background="",h.style.overflow="hidden",d=f.style.overflow,f.style.overflow="hidden",f.appendChild(h)),i=s(u,t),h.fake?(h.parentNode.removeChild(h),f.style.overflow=d,f.offsetHeight):u.parentNode.removeChild(u),!!i}var c=[],d=[],p={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var s=this;setTimeout(function(){e(s[t])},0)},addTest:function(t,e,s){d.push({name:t,fn:e,options:s})},addAsyncTest:function(t){d.push({name:null,fn:t})}},u=function(){};u.prototype=p,u=new u;var f=e.documentElement,h="svg"===f.nodeName.toLowerCase(),m=p._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];p._prefixes=m;var y=p.testStyles=i;u.addTest("touchevents",function(){var s;if("ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch)s=!0;else{var a=["@media (",m.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");y(a,function(t){s=9===t.offsetTop})}return s}),o(),n(c),delete p.addTest,delete p.addAsyncTest;for(var v=0;v<u._q.length;v++)u._q[v]();t.Modernizr=u}(window,document);
//# sourceMappingURL=scripts-bundle.js.map
