"use strict";$(document).ready(function(){function t(t,e,a){var n=d3.select(a),o=$(a).outerWidth();n.select(".tt-season").text(e.season),n.select(".tt-opponent").text(e.opp),n.select(".tt-week").text(e.week),n.select(".tt-quarter").text(e.quarter),n.select(".tt-time").text(e.time),n.select(".tt-detail").text(e.detail);var s=$(window).width(),r=0;t.clientX>s/2.1?(r=t.clientX-(o-10),n.attr("class","tooltip")):(r=t.clientX-10,n.attr("class","tooltip"));var l=t.clientY+15;n.attr("style","left: "+r+"px; top: "+l+"px")}function e(t,e){var a={top:0,right:50,bottom:40,left:50},n=$(e).width(),o=n/3,s=o>400?400:o,r=s/100*1.5,l=d3.scaleLinear().range([0,n-a.left-a.right]),c=d3.scaleLinear().range([s,0]);l.domain([0,100]),c.domain([s,0]);var i=d3.axisBottom().scale(l).tickValues([0,10,20,30,40,50,60,70,80,90,100]).tickFormat(function(t,e){return e<6?t:t-20*(e-5)}),p=d3.select(e).data(t).append("svg").attr("width",n).attr("height",s+a.top+a.bottom),d=function(t){var e=l(t.spot).toString(),a=l(t.spot+ +t.yards).toString(),n=c(s).toString(),o=c(s-+t.yards/1.25*r).toString(),i=l(t.spot+ +t.yards/4).toString(),p=l(t.spot+ +t.yards-+t.yards/4).toString();return 0===+t.yards&&"complete"===t.result&&(o=c(s-25)),"M "+e+","+n+" C "+i+", "+o+" "+p+", "+o+" "+a+", "+n},u=p.selectAll("g").data(t).enter().append("g").attr("transform","translate( "+a.left+", "+a.top+" )");u.selectAll("path").data(function(t){return t.plays}).enter().append("path").attr("class",function(t){return t.touchdown===!0?"pass touchdown yr-"+t.season+" "+t.opp:"pass yr-"+t.season+" "+t.opp}).attr("d",function(t){return d(t)});var f=p.append("g");f.append("line").attr("x1",0).attr("x2",n).attr("y1",s).attr("y2",s),p.append("g").attr("class","x axis").attr("transform","translate("+a.left+", "+s+")").call(i),p.append("text").attr("class","axis-label").attr("text-anchor","middle").attr("x",l(50)+a.left).attr("y",s+35).attr("class","axis-label").text("Cowboys moving left to right")}function a(e){var a=d3.scaleLinear().domain([-10,100]).interpolate(d3.interpolateHcl).range([d3.rgb("#e9f4fd"),d3.rgb("#0b3f65")]),n=d3.select("#att-graphic").data(e),o=n.selectAll("div").data(e).enter().append("div").attr("class",function(t){return"season season-"+t.season_year+" clearfix"});o.append("span").attr("class","season-label").text(function(t){return t.season_year}),o.selectAll("attempt").data(function(t){return t.plays}).enter().append("span").attr("style",function(t){return"background-color: "+a(+t.yards)}).attr("class",function(t){return t.interception?"attempt interception":t.touchdown?"attempt touchdown":"incomplete"===t.result?"attempt incomplete":"attempt"}).text(function(t){return t.interception?"I":""}).on("mousemove",function(e){return t(event,e,"#att-tooltip")}).on("mouseout",function(){return d3.select("#att-tooltip").attr("class","tooltip no-show")})}function n(){$(".pass").addClass("no-show"),"all"!==c&&"all"!==i?$(".yr-"+c+"."+i).removeClass("no-show"):"all"===c&&"all"!==i?$("."+i).removeClass("no-show"):"all"===i&&"all"!==c?$(".yr-"+c).removeClass("no-show"):$(".pass").removeClass("no-show")}function o(t){l=[],$("#receiver-arcs").html("");for(var a=function(e){var a={season_year:r[e].season_year,plays:[]};$.each(r[e].plays,function(e,n){n.target===t&&a.plays.push(n)}),l.push(a)},n=0;n<r.length;n+=1)a(n);$("#receiver-name").text(t),e(l,"#receiver-arcs")}function s(t){var e=_.orderBy(t,["catches"],["desc"]);$.each(e,function(t,e){$("#catchers").append("<option value='"+e.receiver+"'>"+e.receiver+"</option>")}),$("#catchers").change(function(){var t=$(this).val();o(t)})}var r=[],l=[],c="all",i="all";$("#comp-season").change(function(){c=$("#comp-season option:selected").attr("value"),n()}),$("#comp-opp").change(function(){i=$("#comp-opp option:selected").attr("value"),n()}),$(".tooltip button").click(function(){return $(".tooltip").addClass("no-show")}),$.getJSON("../js/data.json",function(t){t.forEach(function(t){var e=t;e.plays=_.orderBy(t.plays,["week","quarter","sort_time"],["asc","asc","desc"]),r.push(e)}),e(r,"#graphic"),a(r),o("Jason Witten")}),$.getJSON("../js/rec-data.json",function(t){s(t)})}),$(document).ready(function(){function t(){$(".open-list").removeClass("open-list"),$(".open-button").removeClass("open-button")}var e=new Date,a=e.getFullYear();$(".copyright").text(a);var n=$(".header-group button");n.click(function(e){n.hasClass("open-button")===!0&&$(this).hasClass("open-button")===!0?t():(t(),$(this).addClass("open-button"),$(this).siblings("ul").addClass("open-list")),e.stopPropagation()}),$("body").click(function(){t()}),document.cookie.indexOf("DMN-P")>=0?$("body").addClass("subscribed"):$("body").removeClass("subscribed")});
//# sourceMappingURL=scripts-bundle.js.map
