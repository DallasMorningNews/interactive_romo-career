"use strict";$(document).ready(function(){function t(t,e,a){var o=d3.select(a),n=$(a).outerWidth();o.select(".tt-season").text(e.season),o.select(".tt-opponent").text(e.opp),o.select(".tt-week").text(e.week),o.select(".tt-quarter").text(e.quarter),o.select(".tt-time").text(e.time),o.select(".tt-detail").text(e.detail);var s=$(window).width(),r=0;t.clientX>s/2.1?(r=t.clientX-(n-10),o.attr("class","tooltip")):(r=t.clientX-10,o.attr("class","tooltip"));var l=t.clientY+15;o.attr("style","left: "+r+"px; top: "+l+"px")}function e(t){console.log(t);var e={top:0,right:50,bottom:40,left:50},a=$("#graphic").width(),o=a/3,n=o>400?400:o,s=n/100*1.5,r=d3.scaleLinear().range([0,a-e.left-e.right]),l=d3.scaleLinear().range([n,0]);r.domain([0,100]),l.domain([n,0]);var c=d3.axisBottom().scale(r).tickValues([0,10,20,30,40,50,60,70,80,90,100]).tickFormat(function(t,e){return e<6?t:t-20*(e-5)}),i=d3.select("#graphic").data(t).append("svg").attr("width",a).attr("height",n+e.top+e.bottom),p=function(t){var e=r(t.spot).toString(),a=r(t.spot+ +t.yards).toString(),o=l(n).toString(),c=l(n-+t.yards/1.25*s).toString(),i=r(t.spot+ +t.yards/4).toString(),p=r(t.spot+ +t.yards-+t.yards/4).toString();return 0===+t.yards&&"complete"===t.result&&(console.log("test"),console.log(t.season,t.opp,t.spot),c=l(n-25)),"M "+e+","+o+" C "+i+", "+c+" "+p+", "+c+" "+a+", "+o},d=i.selectAll("g").data(t).enter().append("g").attr("transform","translate( "+e.left+", "+e.top+" )");d.selectAll("path").data(function(t){return t.plays}).enter().append("path").attr("class",function(t){return t.touchdown===!0?"pass touchdown yr-"+t.season+" "+t.opp:"pass yr-"+t.season+" "+t.opp}).attr("d",function(t){return p(t)});var u=i.append("g");u.append("line").attr("x1",0).attr("x2",a).attr("y1",n).attr("y2",n),i.append("g").attr("class","x axis").attr("transform","translate("+e.left+", "+n+")").call(c),i.append("text").attr("class","axis-label").attr("text-anchor","middle").attr("x",r(50)+e.left).attr("y",n+35).attr("class","axis-label").text("Cowboys moving left to right")}function a(e){var a=d3.scaleLinear().domain([-10,100]).interpolate(d3.interpolateHcl).range([d3.rgb("#e9f4fd"),d3.rgb("#0b3f65")]),o=d3.select("#att-graphic").data(e),n=o.selectAll("div").data(e).enter().append("div").attr("class",function(t){return"season season-"+t.season_year+" clearfix"});n.append("span").attr("class","season-label").text(function(t){return console.log(t),t.season_year}),n.selectAll("attempt").data(function(t){return t.plays}).enter().append("span").attr("style",function(t){return"background-color: "+a(+t.yards)}).attr("class",function(t){return t.interception?"attempt interception":t.touchdown?"attempt touchdown":"incomplete"===t.result?"attempt incomplete":"attempt"}).text(function(t){return t.interception?"I":""}).on("mousemove",function(e){return t(event,e,"#att-tooltip")}).on("mouseout",function(){return d3.select("#att-tooltip").attr("class","tooltip no-show")})}function o(){console.log(r,l),$(".pass").addClass("no-show"),"all"!==r&&"all"!==l?$(".yr-"+r+"."+l).removeClass("no-show"):"all"===r&&"all"!==l?$("."+l).removeClass("no-show"):"all"===l&&"all"!==r?$(".yr-"+r).removeClass("no-show"):$(".pass").removeClass("no-show")}function n(t,e){$(".rec-stat").text(e);for(var a=_.orderBy(t,[e],["desc"]),o=0;o<10;o+=1){var n="<tr><td>"+a[o].receiver+"</td><td>"+a[o][e]+"</td></tr>";$("#rec-graphic tbody").append(n)}console.table(a)}var s=[],r="all",l="all";$("#comp-season").change(function(){r=$("#comp-season option:selected").attr("value"),o()}),$("#comp-opp").change(function(){l=$("#comp-opp option:selected").attr("value"),o()}),$(".tooltip button").click(function(){return $(".tooltip").addClass("no-show")}),$.getJSON("../js/data.json",function(t){t.forEach(function(t){var e=t;e.plays=_.orderBy(t.plays,["week","quarter","sort_time"],["asc","asc","desc"]),s.push(e)}),e(s),a(s)}),$.getJSON("../js/rec-data.json",function(t){n(t,"catches")})}),$(document).ready(function(){function t(){$(".open-list").removeClass("open-list"),$(".open-button").removeClass("open-button")}var e=new Date,a=e.getFullYear();$(".copyright").text(a);var o=$(".header-group button");o.click(function(e){o.hasClass("open-button")===!0&&$(this).hasClass("open-button")===!0?t():(t(),$(this).addClass("open-button"),$(this).siblings("ul").addClass("open-list")),e.stopPropagation()}),$("body").click(function(){t()}),document.cookie.indexOf("DMN-P")>=0?$("body").addClass("subscribed"):$("body").removeClass("subscribed")});
//# sourceMappingURL=scripts-bundle.js.map
